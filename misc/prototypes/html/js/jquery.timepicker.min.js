(function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)})(function(a){function g(a){if(a.minTime&&(a.minTime=u(a.minTime)),a.maxTime&&(a.maxTime=u(a.maxTime)),a.durationTime&&(a.durationTime=u(a.durationTime)),a.disableTimeRanges.length>0){for(var b in a.disableTimeRanges)a.disableTimeRanges[b]=[u(a.disableTimeRanges[b][0]),u(a.disableTimeRanges[b][1])];a.disableTimeRanges=a.disableTimeRanges.sort(function(a,b){return a[0]-b[0]})}return a}function h(b){var d=b.data("timepicker-settings"),e=b.data("timepicker-list");e&&e.length&&(e.remove(),b.data("timepicker-list",!1)),e=a("<ul />",{tabindex:-1,"class":"ui-timepicker-list"}),d.className&&e.addClass(d.className),e.css({display:"none",position:"absolute"}),null===d.minTime&&null===d.durationTime||!d.showDuration||e.addClass("ui-timepicker-with-duration");var g=null!==d.durationTime?d.durationTime:d.minTime,h=null!==d.minTime?d.minTime:0,i=null!==d.maxTime?d.maxTime:h+c-1;h>=i&&(i+=c);for(var j=d.disableTimeRanges,k=j.shift(),l=h;i>=l;l+=60*d.step){var n=l%c,o=a("<li />");if(o.data("time",n),o.text(t(n,d.timeFormat)),(null!==d.minTime||null!==d.durationTime)&&d.showDuration){var p=a("<span />");p.addClass("ui-timepicker-duration"),p.text(" ("+s(l-g)+")"),o.append(p)}k&&(n>=k[0]&&k[1]>n?o.addClass("ui-timepicker-disabled"):n>=k[1]&&(k=j.shift())),e.append(o)}e.data("timepicker-input",b),b.data("timepicker-list",e);var q=d.appendTo;"string"==typeof q?q=a(q):"function"==typeof q&&(q=q(b)),q.append(e),m(b,e),e.on("click","li",function(){b.off("focus.timepicker"),b.on("focus.timepicker-ie-hack",function(){b.off("focus.timepicker-ie-hack"),b.on("focus.timepicker",f.show)}),b[0].focus(),e.find("li").removeClass("ui-timepicker-selected"),a(this).addClass("ui-timepicker-selected"),r(b)&&e.hide()})}function i(){return new Date(1970,1,1,0,0,0)}function j(b){"ontouchstart"in document?a("body").on("touchstart.ui-timepicker",k):(a("body").on("mousedown.ui-timepicker",k),b.closeOnWindowScroll&&a(window).on("scroll.ui-timepicker",k))}function k(b){var c=a(b.target),d=c.closest(".ui-timepicker-input");0===d.length&&0===c.closest(".ui-timepicker-list").length&&(f.hide(),a("body").unbind(".ui-timepicker"),a(window).unbind(".ui-timepicker"))}function l(b,c,d){if(!d&&0!==d)return!1;var e=b.data("timepicker-settings"),f=!1,g=30*e.step;return c.find("li").each(function(b,c){var e=a(c),h=e.data("time")-d;return g>Math.abs(h)||h==g?(f=e,!1):void 0}),f}function m(a,b){var c=u(o(a)),d=l(a,b,c);d&&d.addClass("ui-timepicker-selected")}function n(){if(""!==this.value){var b=a(this),c=u(this.value);if(null===c)return b.trigger("timeFormatError"),void 0;var d=b.data("timepicker-settings");if(null!==d.minTime&&d.minTime>c?b.trigger("timeRangeError"):null!==d.maxTime&&c>d.maxTime&&b.trigger("timeRangeError"),d.forceRoundTime){var e=c%(60*d.step);e>=30*d.step?c+=60*d.step-e:c-=e}var f=t(c,d.timeFormat);p(b,f)}}function o(a){return a.is("input")?a.val():a.data("ui-timepicker-value")}function p(a,b){a.is("input")?a.val(b):a.data("ui-timepicker-value",b)}function q(b){var c=a(this),d=c.data("timepicker-list");if(!d||!d.is(":visible")){if(40!=b.keyCode)return!0;c.focus()}switch(b.keyCode){case 13:return r(c)&&f.hide.apply(this),b.preventDefault(),!1;case 38:var e=d.find(".ui-timepicker-selected");e.length?e.is(":first-child")||(e.removeClass("ui-timepicker-selected"),e.prev().addClass("ui-timepicker-selected"),e.prev().position().top<e.outerHeight()&&d.scrollTop(d.scrollTop()-e.outerHeight())):(d.children().each(function(b,c){return a(c).position().top>0?(e=a(c),!1):void 0}),e.addClass("ui-timepicker-selected"));break;case 40:e=d.find(".ui-timepicker-selected"),0===e.length?(d.children().each(function(b,c){return a(c).position().top>0?(e=a(c),!1):void 0}),e.addClass("ui-timepicker-selected")):e.is(":last-child")||(e.removeClass("ui-timepicker-selected"),e.next().addClass("ui-timepicker-selected"),e.next().position().top+2*e.outerHeight()>d.outerHeight()&&d.scrollTop(d.scrollTop()+e.outerHeight()));break;case 27:d.find("li").removeClass("ui-timepicker-selected"),d.hide();break;case 9:f.hide();break;case 16:case 17:case 18:case 19:case 20:case 33:case 34:case 35:case 36:case 37:case 39:case 45:return;default:return d.find("li").removeClass("ui-timepicker-selected"),void 0}}function r(a){var b=a.data("timepicker-settings"),c=a.data("timepicker-list"),d=null,e=c.find(".ui-timepicker-selected");if(e.hasClass("ui-timepicker-disabled"))return!1;if(e.length?d=e.data("time"):o(a)&&(d=u(o(a)),m(a,c)),null!==d){var f=t(d,b.timeFormat);p(a,f)}return a.trigger("change").trigger("changeTime"),!0}function s(a){var c,b=Math.round(a/60);if(60>Math.abs(b))c=[b,e.mins];else if(60==b)c=["1",e.hr];else{var d=(b/60).toFixed(1);"."!=e.decimal&&(d=d.replace(".",e.decimal)),c=[d,e.hrs]}return c.join(" ")}function t(a,c){if(null!==a){for(var f,g,d=new Date(b.valueOf()+1e3*a),e="",h=0;c.length>h;h++)switch(g=c.charAt(h)){case"a":e+=d.getHours()>11?"pm":"am";break;case"A":e+=d.getHours()>11?"PM":"AM";break;case"g":f=d.getHours()%12,e+=0===f?"12":f;break;case"G":e+=d.getHours();break;case"h":f=d.getHours()%12,0!==f&&10>f&&(f="0"+f),e+=0===f?"12":f;break;case"H":f=d.getHours(),e+=f>9?f:"0"+f;break;case"i":var i=d.getMinutes();e+=i>9?i:"0"+i;break;case"s":a=d.getSeconds(),e+=a>9?a:"0"+a;break;default:e+=g}return e}}function u(b){if(""===b)return null;if(!b||b+0==b)return b;"object"==typeof b&&(b=b.getHours()+":"+b.getMinutes()+":"+b.getSeconds()),new Date(0);var d;d=-1===b.indexOf(":")&&a.isNumeric(b.charAt(1))?/^([0-2][0-9]):?([0-5][0-9])?:?([0-5][0-9])?\s*([pa]?)/:/^(\d{1,2})(?::(\d{1,2}))?(?::(\d{1,2}))?\s*([pa]?)/;var e=b.toLowerCase().match(d);if(!e)return null;var g,f=parseInt(1*e[1],10);g=e[4]?12==f?"p"==e[4]?12:0:f+("p"==e[4]?12:0):f;var h=1*e[2]||0,i=1*e[3]||0;return 3600*g+60*h+i}var b=i(),c=86400,d={className:null,minTime:null,maxTime:null,durationTime:null,step:30,showDuration:!1,timeFormat:"g:ia",scrollDefaultNow:!1,scrollDefaultTime:!1,selectOnBlur:!1,disableTouchKeyboard:!0,forceRoundTime:!1,appendTo:"body",disableTimeRanges:[],closeOnWindowScroll:!0},e={decimal:".",mins:"mins",hr:"hr",hrs:"hrs"},f={init:function(b){return this.each(function(){var c=a(this);if("SELECT"==c[0].tagName){for(var h={type:"text",value:c.val()},i=c[0].attributes,j=0;i.length>j;j++)h[i[j].nodeName]=i[j].nodeValue;var k=a("<input />",h);c.replaceWith(k),c=k}var l=a.extend({},d);b&&(l=a.extend(l,b)),l.lang&&(e=a.extend(e,l.lang)),l=g(l),c.data("timepicker-settings",l),c.prop("autocomplete","off"),c.on("click.timepicker focus.timepicker",f.show),c.on("blur.timepicker",n),c.on("keydown.timepicker",q),c.addClass("ui-timepicker-input"),n.call(c.get(0))})},show:function(){var c=a(this),d=c.data("timepicker-settings");"ontouchstart"in document&&d.disableTouchKeyboard&&c.blur();var e=c.data("timepicker-list");if(!c.prop("readonly")&&(e&&0!==e.length||(h(c),e=c.data("timepicker-list")),!e.is(":visible"))){f.hide(),e.show(),c.offset().top+c.outerHeight(!0)+e.outerHeight()>a(window).height()+a(window).scrollTop()?e.offset({left:c.offset().left,top:c.offset().top-e.outerHeight()}):e.offset({left:c.offset().left,top:c.offset().top+c.outerHeight()});var g=e.find(".ui-timepicker-selected");if(g.length||(o(c)?g=l(c,e,u(o(c))):d.scrollDefaultNow?g=l(c,e,u(new Date)):d.scrollDefaultTime!==!1&&(g=l(c,e,u(d.scrollDefaultTime)))),g&&g.length){var i=e.scrollTop()+g.position().top-g.outerHeight();e.scrollTop(i)}else e.scrollTop(0);j(d),c.trigger("showTimepicker")}},hide:function(){a(".ui-timepicker-list:visible").each(function(){var b=a(this),c=b.data("timepicker-input"),d=c.data("timepicker-settings");d&&d.selectOnBlur&&r(c),b.hide(),c.trigger("hideTimepicker")})},option:function(b,c){var d=this,e=d.data("timepicker-settings"),f=d.data("timepicker-list");if("object"==typeof b)e=a.extend(e,b);else if("string"==typeof b&&c!==void 0)e[b]=c;else if("string"==typeof b)return e[b];return e=g(e),d.data("timepicker-settings",e),f&&(f.remove(),d.data("timepicker-list",!1)),d},getSecondsFromMidnight:function(){return u(o(this))},getTime:function(){var a=this,b=new Date;return b.setHours(0,0,0,0),new Date(b.valueOf()+1e3*u(o(a)))},setTime:function(a){var b=this,c=t(u(a),b.data("timepicker-settings").timeFormat);p(b,c)},remove:function(){var a=this;a.hasClass("ui-timepicker-input")&&(a.removeAttr("autocomplete","off"),a.removeClass("ui-timepicker-input"),a.removeData("timepicker-settings"),a.off(".timepicker"),a.data("timepicker-list")&&a.data("timepicker-list").remove(),a.removeData("timepicker-list"))}};a.fn.timepicker=function(b){return f[b]?f[b].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof b&&b?(a.error("Method "+b+" does not exist on jQuery.timepicker"),void 0):f.init.apply(this,arguments)}});